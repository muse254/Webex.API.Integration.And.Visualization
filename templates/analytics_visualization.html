<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Visualization</title>

    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        // the JSON data is provided when the HTML is generated from this template.
        var jsonStr = {{.}}; // Comes out as:    "{\"Name\":\"Center\",\"X\":100,\"Y\":200}";
        var lineData = JSON.parse(jsonStr.replace(/\\/, ""));

        google.charts.load('current', { 'packages': ['line'] });
        google.charts.setOnLoadCallback(drawGraph(lineData.audio_in, "Audio In", "audio_in"));
        google.charts.setOnLoadCallback(drawGraph(lineData.audio_out, "Audio Out", "audio_out"));
        google.charts.setOnLoadCallback(drawGraph(lineData.video_in, "Video In", "video_in"));
        google.charts.setOnLoadCallback(drawGraph(lineData.video_out, "Video Out", "video_out"));
        google.charts.setOnLoadCallback(drawGraph(lineData.audio_in, "Share In", "share_in"));
        google.charts.setOnLoadCallback(drawGraph(lineData.audio_in, "Share Out", "share_out"));

        function drawGraph(values, title, div) {
            return function () {
                var data = google.visualization.Datable();
                data.addColumn('number', 'Time Series Entry');
                data.addColumn('number', 'Packet Loss');
                data.addColumn('number', 'Latency');
                data.addColumn('number', 'Jitter');
                data.addColumn('number', 'Frame Rate');
                /*[
                    [1,  37.8, 80.8, 41.8, 11.1],
                    [2,  30.9, 69.5, 32.4, 5.4],
                ...]
                */
                data.addRows(values)

                var options = {
                    chart: {
                        title: `Metric: ${title}`
                    },
                    width: 1000,
                    height: 700
                };

                var graph = new google.charts.Line(div);
                graph.draw(data, google.charts.Line.convertOptions(options));
            }
        }

    </script>
</head>

<body>
    <!--Divs that will hold the graphs-->
    <div id="audio_in"></div>
    <div id="audio_out"></div>
    <div id="video_in"></div>
    <div id="video_out"></div>
    <div id="share_in"></div>
    <div id="share_out"></div>
</body>

</html>